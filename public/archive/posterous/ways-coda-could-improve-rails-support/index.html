<!DOCTYPE html>
<html lang="en-us">
<head>
	<title>gwcoffey.com: Ways Coda Could Improve Rails Support</title>

    
    
    
    <link rel="stylesheet" href="/css/style.css">
    
	
	
	<script src="/js/main.js" defer></script>
</head>

<body>

<header>
	<h2><a rel="home" href="/">gwcoffey.com</a></h2>
</header>

<main>

<section class="archive">
	<h3>Archived Post</h3>
	
	<p>
		This post is archived from my <a href="https://en.wikipedia.org/wiki/Posterous">Posterous</a> blog, which shut down in 2012. Some posts have been edited slightly to fix typographical errors, correctly represent the gender of some individuals, and remove unnecessarily-gendered language. You can <a href="/archive/posterous/">view the full archive here</a>.
	</p>
	
</section>

<article>

<hgroup>
	<h1>Ways Coda Could Improve Rails Support</h1>
	<div class="byline">
		<address><a rel="author" href="/me">Geoff Coffey</a></address>
		/
		<time datetime="2011-10-05 00:00:00 &#43;0000 UTC">5 October 2011</time>
	</div>
</hgroup>

<p><a href="https://twitter.com/#!/panic/status/121697957585227776">You asked for it</a>. This is my off-the-cuff list. I&rsquo;m sure I&rsquo;ll think of other things.</p>
<h2 id="code-editing">Code Editing</h2>
<p>Coda has an annoying habit of treating &lt; and &gt; as angle brackets in ruby files when you have &ldquo;Automatically close brackets&rdquo; turned on.</p>
<figure><img src="image-1.png"
         alt="A screenshot of Javascript code showing &lt; treated properly as a less-than sign." width="601" height="173"/><figcaption>
            <p>Code handles &lt; in Javascript cleanly.</p>
        </figcaption>
</figure>

<p>Butâ€¦</p>
<figure><img src="image-2.png"
         alt="A screenshot of Ruby code showing &lt; treated incorrectly as an angle-bracket." width="275" height="154"/><figcaption>
            <p>But in Ruby code it gets confused.</p>
        </figcaption>
</figure>

<p>Note that there are no angle brackets in ruby, so there&rsquo;s no need to auto-close them in .rb files at all. (It is trickier in .html.erb files, but you handle switching between ruby and html well in those already.)</p>
<p>Also, you&rsquo;ve got a few minor-but-annoying syntax coloring issues. The most destructive is bad handling of nested interpolations in ruby code:</p>
<figure><img src="image-3.png"
         alt="A screenshot of Ruby code showing syntax highlighting treating a comment as a string after complex string interpolation." width="527" height="106"/><figcaption>
            <p>Nested string interpolation can cause Code to color everything after as a string.</p>
        </figcaption>
</figure>

<p>But there are a few others:</p>
<figure><img src="image-4.png"
         alt="A screenshot of Ruby code showing several cases where ruby colors symbols and method calls like keywords." width="618" height="308"/><figcaption>
            <p>Coda has trouble when keywords appear in symbols and method names. And it doens&rsquo;t seem to understand quoted symbols.</p>
        </figcaption>
</figure>

<p>In a perfect world, I&rsquo;d be able to mix ruby with HTML or Javascript in an ERB template and get proper output. CSS, YAML, and XML would be nice too. In fact, because of mysterious Rails magic, all .yml files should probably be treated as .yml.erb.</p>
<h2 id="preview-and-terminal-tabs-confuse-me">Preview and Terminal Tabs Confuse Me</h2>
<p>A rails developer almost certainly spends a lot of time on the terminal. Personally, I <em>like</em> having coda combine my terminals and code into one window. This way I can have two or three Rails projects open at the same time, each self-contained. (This is something I do a lot.)</p>
<p>My typical setup is:</p>
<ol>
<li>A horizontally-split terminal tab; top tails my log, bottom is where I run migrations, use the console, do commits, etc&hellip;</li>
<li>A bajillion edit tabs</li>
<li>A separate browser open for testing</li>
</ol>
<p>And a very typical use pattern is to do some work, accumulating several edit tabs in the process. Complete some work. Commit the changes. Right -click on the terminal tab and click Close Other Tabs. Then start over again with a clean slate.</p>
<p>Given this usage pattern, I have a few complaints:</p>
<ol>
<li>I would prefer to preview in coda. But this is impractical for two reasons. Most importantly, the preview tabs get &ldquo;lost&rdquo; among the noise of edit tabs. Also, the whole idea of previewing a &ldquo;file&rdquo; doesn&rsquo;t really make sense in Rails. I can open a new tab, switch to preview, then navigate to my local server, but it is inconvenient.</li>
<li>I don&rsquo;t really &ldquo;get&rdquo; the idea of switching an edit tab into a terminal. It seems like the behavior is just sort of what happens when you put the Terminal button next to Edit, CSS, and Preview in an HTML editor, even though it doesn&rsquo;t make sense.</li>
</ol>
<p>For me (me! me! me!) I think a more useful paradigm would be for the Preview, Terminal, and Edit buttons to act like mode switches for the whole window rather than the current tab. Then I could:</p>
<ol>
<li>Click &ldquo;Terminal&rdquo; to see my two or three full-size open terminal tabs, do some generators, and run a migration.</li>
<li>Click &ldquo;Edit&rdquo; to go back to my 15 open editors and make some code changes.</li>
<li>Click &ldquo;Preview&rdquo; to switch to my two open preview tabs to check the results.</li>
<li>Click &ldquo;Terminal&rdquo; to get back to the terminals again because my code (of course) is perfect and I&rsquo;m ready to commit.</li>
<li>Click &ldquo;Edit&rdquo; and quickly close all the tabs to get to a clean starting place for my next task.</li>
</ol>
<p>All the while, my terminals and preview tabs stay open and ready. (For this to all work just right, the Local URL I set in the Site settings should not be augmented with the current file path.)</p>
<p>Of course this is really a deviation from The Way Coda Works, so take it with a grain of salt.</p>
<p>TL;DR version:</p>
<ol>
<li>I only ever have one or two terminal tabs per window.</li>
<li>I only really want one or two preview tabs per window.</li>
<li>These tabs easily get lost in the shuffle of edit tabs.</li>
</ol>
<h2 id="speaking-of-terminals-speed">Speaking of Terminals: Speed</h2>
<p>Since Rails devs spend a lot of time on the terminal, we care a lot about how well it works. Coda&rsquo;s terminal is, in general really nice. (It does have some coloring bugs that I am hard-pressed to describe or reproduce &ndash; suffice it to say sometimes rails log file highlighting goes nuts.) My only real complaint is speed. Heaven forbid I run a rails console task that generates 10,000 lines of development log output while my server is open in a terminal tab. The next time I do a web action, rails built in server dumps the log up to the end, and it takes about 15 thousand hours for all those lines to scroll by in Coda&rsquo;s terminal. The OSX built in terminal does not have this problem.</p>
<p>Oh, and Command-K should clear the current Terminal. And it should work even if the Terminal isn&rsquo;t so full it scrolls. This is consistent with the OSX terminal and Console.app.</p>
<h2 id="log-tailing">Log Tailing</h2>
<p>One of the terminal tabs I keep open is the rails log. Like a lot of Rails devs, I&rsquo;m likely to start using Pow for my projects, which means I won&rsquo;t need to run the rails server manually in each project. (It also means I can keep the servers running for multiple projects at the same time, and I can test more complex use cases). But I still want to see my logs.</p>
<p>Along with its Terminal and Preview tabs, it would be lovely if Coda had a Log tab that tailed the file you point it at. Bonus points for a &ldquo;Clean&rdquo; command to clear its scrollback buffer quickly and easily. Double prizes if I can filter the log lines (live) with a regex pattern.</p>
<h2 id="default-terminals">Default Terminals</h2>
<p>Once I open a terminal the first time in a new Site, Coda remembers that I want my terminals local instead of SSH (thanks!). It would be great if I could configure one or more terminals I always want when I open this site. (Ie, one &ldquo;normal&rdquo; terminal, one that runs <code>rails c</code>, and one that runs <code>mysql -u root</code>, or whatever.)</p>
<h2 id="some-code-completion">Some Code Completion</h2>
<p>Code Completion is understandably hard in a dynamic language like Ruby. The last thing I want is for Coda to start acting like Eclipse, cooking my lap, spinning my fans, and hiccuping during basic text entry. I keep code completion strictly optional (via Escape or F5) because I find it distracting. But it is really nice when I want it. Like here:</p>
<figure><img src="image-5.png"
         alt="A screenshot showing Code offering useful code completion suggestions for CSS properties." width="261" height="124"/><figcaption>
            <p>Code completion works great in CSS.</p>
        </figcaption>
</figure>

<p>Along these lines, a few rails code completions would be nice, like:</p>
<figure><img src="image-6.png"
         alt="A mockup of code completion suggestions for ActiveRecord &#34;has_many&#34; options." width="250" height="202"/><figcaption>
            <p>Code completion suggestions for common rails methods would be really nice.</p>
        </figcaption>
</figure>

<p>(I just shed a small tear of joy).</p>
<p>I think a great first start would be options hash completions for associations and migrations:</p>
<ul>
<li>has_many</li>
<li>has_one</li>
<li>belongs_to</li>
<li>has_and_belongs_to_many</li>
<li>add_column</li>
<li>remove_column</li>
<li>add_index</li>
<li>remove_index</li>
</ul>
<p>There are probably a few other low-hanging-fruit(s?).</p>
<h2 id="mercurial-support">Mercurial Support</h2>
<p>Oh wait, that has nothing to do with Rails. Never mind.</p>
<p><strong>Thank you for asking!</strong></p>


</article>


</main>

<footer>
    <nav>
        
        
        
        
        
			<h2>Writing</h2>
			<menu>
			
				
				<li><a href="/weblog/">Weblog</a></li>
				
			
			</menu>
		
			<h2>Projects</h2>
			<menu>
			
				
				<li><a href="/maclanebot/">maclanebot</a></li>
				
			
				
				<li><a href="/wordplay/">Wordplay</a></li>
				
			
			</menu>
		
			<h2>About</h2>
			<menu>
			
				
				<li><a href="/me/">Contact</a></li>
				
			
				
				<li><a href="/colophon/">Colophon</a></li>
				
			
				
				<li><a href="/license/">license</a></li>
				
			
			</menu>
		
    </nav>
</footer>

</body>
</html>
